# moa-calendar

# [상위기획서] 모아 캘린더 (Moa Calendar)
**부제: 관계와 맥락을 담은 올인원 자산 관리 플랫폼**

## 1. 서비스 정의 (Service Definition)

### 1.1 기획 의도 및 명칭
*   **명칭:** **모아 캘린더 (Moa Calendar)**
    *   *의미:* 너와 나의 일정을 모으고, 흩어진 자산 내역을 한곳에 모은다.
*   **컨셉:** 일정(Context)과 가계부(Transaction)가 분리된 기존 경험을 통합.
    *   "약속이 있으면 지출이 발생한다"는 자연스러운 맥락을 앱에 구현합니다.
*   **확장성:** 1인용 '꼼꼼한 비서'에서 시작하여, 연인·부부·모임 등 관계의 변화에 따라 '공유 가계부'로 자연스럽게 확장됩니다.

### 1.2 핵심 가치 (Core Values)
1.  **Contextual (맥락 연결):** 지출 내역을 특정 일정에 연결하여, 단순히 '얼마'를 썼는지가 아니라 '무엇 때문에(어떤 약속에서)' 썼는지를 기록합니다.
2.  **Flexible (유연성):** 일정에 종속된 지출뿐만 아니라, 월세나 급여처럼 일정이 없는 독립적인 자산 흐름도 완벽하게 지원합니다.
3.  **Separable (명확한 구분):** 하나의 캘린더 안에서 '내 자산(Personal)'과 '우리 자산(Joint)'을 태그와 색상으로 명확히 격리하여 관리합니다.

---

## 2. 서비스 아키텍처 (Service Architecture)

### 2.1 캘린더 = 그룹 (Calendar is a Group)
이 서비스의 최상위 개념은 **'그룹(Group)'**입니다. 유저는 상황에 따라 여러 그룹을 오갈 수 있습니다.

*   **내 달력 (My Calendar):** 회원가입 시 자동으로 생성되는 1인 그룹입니다.
*   **공용 달력 (Shared Calendar):** 멤버가 초대된 그룹입니다. (예: Sweet Home, 여행 모임 등)

### 2.2 유저 권한 및 역할
*   **호스트(Host):** 그룹을 생성하고 초대 코드를 발송한 관리자.
*   **게스트(Guest):** 초대 코드를 통해 합류한 멤버.
*   **권한 정책:** 공유된 캘린더 내에서는 호스트와 게스트가 **동등한 쓰기/수정 권한**을 가집니다.

---

## 3. 핵심 기능 로직 (Core Logic)

### 3.1 일정 관리 (Schedule)
*   **정의:** 특정 날짜/시간에 발생하는 이벤트.
*   **카테고리 (성격 구분):**
    *   **개인 일정 (Personal):** 공유 캘린더에 등록하지만, 성격상 '나의 사적인 약속'. (기본적으로 내 색상 표시).
    *   **공동 일정 (Joint):** 구성원 모두가 참여하거나 알아야 할 '우리의 약속'. (공동 태그 표시).
*   **시각화:** 유저별 고유 색상(8종)으로 누구의 일정인지 달력 바(Bar)로 표시.

### 3.2 가계부 관리 (Ledger)
*   **정의:** 자산의 변동(수입/지출) 기록.
*   **등록 방식의 이원화:**
    1.  **일정 연결형:** 등록 시 **[Link to Schedule]** 옵션을 통해 특정 약속을 선택. (예: '친구 모임' 일정에 식비 연결).
    2.  **날짜 독립형:** 일정 연결 없이 날짜에 귀속. (예: 공과금, 편의점).
*   **자산 성격 구분 (Asset Type):**
    *   **Personal (분홍):** 내 개인 지갑에서 나간 돈.
    *   **Joint (파랑):** 공용 통장(생활비)에서 나간 돈.
*   **표시 방식:** 상세 화면에서 일정 리스트와 **분리된 별도의 영역(Card)**으로 노출하여 가독성 확보.

---

## 4. 유저 시나리오 (User Scenario)

### Scene A. 호스트: 개인 비서에서 부부 가계부로
1.  **시작:** '내 달력'에서 개인 일정과 지출을 기록하며 꼼꼼하게 관리합니다.
2.  **확장:** 결혼 후 배우자와 돈 관리를 합치기로 합니다. 설정에서 **[멤버 초대하기]**를 눌러 배우자에게 링크를 보냅니다.
3.  **변화:** 배우자가 들어오면 상단 필터에 '배우자' 버튼이 생기며, 글 작성 시 **[공동]** 태그가 활성화됩니다.

### Scene B. 게스트: 초대받은 멤버의 진입 경험 (Context Switching)
1.  **초대 수신:** 카카오톡으로 *"민수님이 'Sweet Home' 캘린더에 초대했습니다"* 링크를 받습니다.
2.  **진입 및 가입:**
    *   앱을 설치하고 회원가입을 완료합니다. 이때 본인의 '내 달력(개인용)'이 먼저 생성됩니다.
3.  **그룹 합류:**
    *   초대 링크를 통해 **"'Sweet Home' 캘린더에 참여하시겠습니까?"** 팝업을 수락합니다.
    *   **[System]** 앱의 메인 헤더가 **'내 달력' → 'Sweet Home'**으로 자동 전환됩니다.
4.  **사용:**
    *   이제 게스트는 **'Sweet Home'** 달력을 메인으로 사용합니다.
    *   민수(호스트)가 미리 기록해둔 공용 일정(파란색 태그)과 가계부를 볼 수 있습니다.
    *   **[Action]** 본인의 일정을 등록할 때 **[Personal]** 혹은 **[Joint]**를 선택해 이 달력에 기록합니다.

---

## 5. 화면 구성 전략 (UI Strategy)

### 5.1 메인 캘린더 (Dashboard)
*   **헤더 (Group Switcher):**
    *   현재 보고 있는 캘린더 이름(예: Sweet Home) 표시.
    *   클릭/터치 시 **[내 달력 / Sweet Home / 처가 모임]** 등 가입된 그룹 목록이 드롭다운되어 즉시 전환 가능.
*   **필터 (Viewer):**
    *   `All`, `Me`, `Partner` 탭 제공.
    *   복잡한 공유 달력에서 '내 일정'만 보고 싶을 때 필터링.
*   **스마트 위젯 (Carousel):**
    *   하단 영역을 스와이프하여 **[오늘 요약 → 예산 현황 → 지출 패턴 → 멤버 비교]** 순으로 확인.

### 5.2 상세 및 입력 (Detail & Input)
*   **일자별 상세 (Modal):**
    *   **상단:** 일정 리스트 (시간 순, 유저 색상 점으로 구분).
    *   **하단:** 가계부 리스트 (자산별 합계 요약 카드 배치).
    *   **Action:** 하단에 `[+일정]` `[+지출]` `[+수입]` 버튼 배치.
*   **입력 폼 (Modal):**
    *   **통합 모달:** Schedule / Expense / Income 탭으로 구성.
    *   **연결성:** Expense 탭에서 **[Link to Schedule]** 드롭다운을 제공하여, 같은 날짜의 일정을 선택(Mapping) 가능.

### 5.3 비즈니스 모델 (BM)
*   **AdMob:** 메인 화면 최하단(Safe Area 위)에 320x50 배너 광고 고정 노출.
*   **Interstitial:** 일정/지출 등록 10회마다 전면 광고 노출 (구독 시 제거).

---

## 6. 데이터베이스 구조 (Schema)
*   **Users:** `id`, `email`, `nickname`, `color_code`
*   **Groups:** `id`, `name`, `type` (PERSONAL/SHARED)
*   **Schedules:** `id`, `group_id`, `user_id`, `title`, `date`, `type` (PERSONAL/JOINT)
*   **Transactions:**
    *   `id`, `amount`, `category`, `date`
    *   `asset_type` (PERSONAL/JOINT)
    *   `schedule_id` (FK, Nullable) - *일정이 있으면 ID 연결, 없으면 NULL*
